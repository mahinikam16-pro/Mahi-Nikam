#include <stdio.h>
int main() {
    FILE *fp;
    int choice;
    char filename[] = "data.txt";
    char text[200];
    char ch;
 
    while (1) {
        printf("\n------- MENU -------\n");
        printf("1. Write to data.txt (fprintf)\n");
        printf("2. Read from data.txt (fscanf)\n");
        printf("3. Display data.txt (fgetc - char by char)\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);
 
        switch (choice) {
 
        case 1:
            fp = fopen(filename, "w");
            if (fp == NULL) {
                printf("Error opening file!\n");
                break;
            }
           printf("Enter text to write: ");
            getchar();                 // clear input buffer
            fgets(text, 200, stdin);   // read line
            fprintf(fp, "%s", text);   // write using fprintf
 
            fclose(fp);
            printf("Data written to data.txt!\n");
            break;
 
        case 2:
            fp = fopen(filename, "r");
            if (fp == NULL) {
                printf("data.txt not found!\n");
                break;
            }
 
            printf("\n--- Reading using fscanf ---\n");
            while (fscanf(fp, "%199[^\\n]\n", text) != EOF) {
                printf("%s\n", text);
            }
 
            fclose(fp);
            break;
 
        case 3:
            fp = fopen(filename, "r");
            if (fp == NULL) {
                printf("data.txt not found!\n");
                break;
            }
 
            printf("\n--- Displaying character by character ---\n");
            while ((ch = fgetc(fp)) != EOF) {
                putchar(ch);
            }
 
            fclose(fp);
            break;
 
        case 4:
            printf("Exiting...\n");
            return 0;
 
        default:
            printf("Invalid choice!\n");
        }
    }
   return 0;
}
